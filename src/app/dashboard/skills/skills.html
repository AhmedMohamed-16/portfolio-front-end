<section class="bg-white p-6 rounded-lg shadow">
  <!-- Add Skill Section -->
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-bold">Skills</h2>
    <button class="px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700"
      (click)="showSkillForm = !showSkillForm">
      {{ showSkillForm ? 'Cancel' : 'Add Skill' }}
    </button>
  </div>

  <form *ngIf="showSkillForm" [formGroup]="myForm" (ngSubmit)="onSubmit()"
    class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-6">
    <div class="flex flex-col">
      <label class="text-gray-700 font-medium mb-1">Modify header section</label>
      <input type="text" formControlName="header_section" placeholder="header_section"
        class="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none" />
    </div>
    <div class="flex flex-col">
      <label class="text-gray-700 font-medium mb-1">Modify description section</label>
      <input type="text" formControlName="description_section" placeholder="description_section"
        class="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none" />
    </div>
    <div class="flex flex-col" style="margin:30px">

      <div class="flex flex-col">
        <label class="text-gray-700 font-medium mb-1">Name</label>
        <input type="text" formControlName="name"
          class="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"
          placeholder="Skill Name" />
      </div>

      <div formArrayName="skillItems">
        <div *ngFor="let item of skillItems.controls; let i = index" [formGroupName]="i" class="mb-4">
          <label class="text-gray-700 font-medium mb-1">Skill Item {{i + 1}}</label>
          <input formControlName="name" placeholder="Name" class="border p-2 rounded w-full mb-1" />
          <input formControlName="experience_years" placeholder="Experience Years"
            class="border p-2 rounded w-full mb-1" />
          <input formControlName="progress_percent" placeholder="Progress %" class="border p-2 rounded w-full mb-1" />
        </div>
        <button type="button" (click)="addItems()" class="mt-2 px-3 py-1 bg-gray-600 text-white rounded">Add Skill
          Item</button>
      </div>
    </div>

    <button class="px-4 py-2 bg-indigo-600 text-white rounded col-span-2">Save Skill</button>
  </form>

  <!-- Skill List -->
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-bold">Skills List</h2>
    <button class="px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700"
      (click)="showSkillList = !showSkillList">
      {{ showSkillList ? 'Cancel' : 'Show Skills' }}
    </button>
  </div>

  <ul class="space-y-3" *ngIf="showSkillList">
    <li *ngFor="let s of skillsData" class="border rounded p-4 flex justify-between items-start">
      <div>
        <h3 class="text-lg font-bold">{{ s.name }}</h3>
        <div class="flex flex-wrap gap-2 mt-2">
          <div *ngFor="let t of s.items" class="text-sm bg-gray-200 px-2 py-1 rounded">
            {{ t.name }} - {{ t.experience_years }} yrs - {{ t.progress_percent }}%
          </div>
        </div>

        <!-- Update Form -->
        <form *ngIf="updatingSkillId === s._id" [formGroup]="myForm" class="grid grid-cols-1 md:grid-cols-2 gap-5 mt-4"
          (ngSubmit)="editSkill(s)">
          <div class="flex flex-col">
            <label>Name</label>
            <input formControlName="name" class="border p-2 rounded w-full" />
          </div>

          <div formArrayName="skillItems">
            <div *ngFor="let item of skillItems.controls; let i = index" [formGroupName]="i" class="mb-4">
              <input formControlName="name" placeholder="Skill Name" class="border p-2 rounded w-full mb-1" />
              <input formControlName="experience_years" placeholder="Experience Years"
                class="border p-2 rounded w-full mb-1" />
              <input formControlName="progress_percent" placeholder="Progress %"
                class="border p-2 rounded w-full mb-1" />
            </div>
          </div>

          <button type="button" (click)="cancelUpdate()"
            class="px-3 py-1 bg-gray-500 text-white rounded">Cancel</button>
          <button type="submit" class="px-3 py-1 bg-indigo-600 text-white rounded">Confirm Update</button>
        </form>
      </div>

      <!-- Action Buttons -->
      <div class="flex flex-col gap-2">
        <button *ngIf="updatingSkillId !== s._id" (click)="startUpdate(s)"
          class="text-indigo-600 hover:text-indigo-800">Update</button>
        <button *ngIf="updatingSkillId !== s._id" (click)="deleteSkill(s._id)"
          class="text-red-600 hover:text-red-800">Delete</button>
      </div>
    </li>
  </ul>
</section>